<!-- Generated by SpecStory -->

# /fix Parsing error: Declaration or statement expec (2025-06-18 16:52:28)

_**User**_

/fix Parsing error: Declaration or statement expected.

---

_**Assistant**_

Looking at the error and the file structure, I can see there's a duplicate export at the end of the file. The code has been duplicated, causing a parsing error. Here's the fix:

## Solution

The file has duplicate code at the end - there are two copies of the export statement and the end of the `MiningSystem` function. We need to remove the duplicate code.

### [MiningSystem.ts](file:///c%3A/Users/aggis/GitHub/runerogue/packages/server/src/server/ecs/systems/MiningSystem.ts)

Remove the duplicate export statements and function ending at the bottom of the file.

```typescript
// ...existing code...

    // Decrement timer and process mining attempt when timer reaches zero
    if (miningActionTimer[playerId] > 0) {
      miningActionTimer[playerId]--;
    }
    if (miningActionTimer[playerId] === 0) {
      processMiningAttempt(world, playerId, nodeId);
      miningActionTimer[playerId] = miningDelay;
    }
  }
  return world;
});

/**
 * Export system for ECS registration
 */
export default MiningSystem;
```

The issue was that the last few lines of the `MiningSystem` function and the export statement were duplicated. I've removed the duplicate code, keeping only one instance of the closing bracket, return statement, and export.

---
