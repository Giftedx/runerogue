<!-- Generated by SpecStory -->

# /fix  (2025-06-20 22:14:42)

_**User**_

/fix 

---

_**Assistant**_

I'll analyze the issues in the project overview document and propose fixes to improve clarity, accuracy, and actionability.

## Solution

The main issues I've identified in the project overview are:

1. **Outdated status indicators** - Some sections marked as complete (âœ…) may not reflect the actual state
2. **Conflicting information** - Discord Activity setup instructions appear in multiple places with slight variations
3. **Missing critical setup steps** - Some Discord-specific requirements are not clearly documented
4. **Redundant troubleshooting sections** - Similar issues are addressed multiple times

Here are the proposed fixes:

### [project-overview.instructions.md](file:///c%3A/Users/aggis/GitHub/runerogue/.github/instructions/project-overview.instructions.md)

Update the project overview with clearer status tracking, consolidated Discord setup instructions, and more accurate current state assessment.

````markdown
---
applyTo: "**"
---

# RuneRogue Project Overview

## What is RuneRogue?

RuneRogue is an OSRS-inspired multiplayer roguelike survival game designed as a Discord activity. It combines the authentic combat mechanics of Old School RuneScape with the fast-paced gameplay patterns of Vampire Survivors, creating a unique multiplayer experience.

## Core Concept

- **Genre**: Multiplayer roguelike survival with OSRS mechanics
- **Platform**: Discord Activity (web-based iframe application)
- **Players**: 2-4 players per room
- **Gameplay**: Survive waves of enemies using authentic OSRS combat, prayer, and skill systems
- **Progression**: OSRS-style XP and levels with equipment upgrades

## Technology Stack

### Backend

- **Node.js + TypeScript** - Server runtime with type safety
- **Colyseus** - Real-time multiplayer framework for game rooms
- **Express** - REST API server for OSRS data and static hosting
- **@colyseus/schema** - Efficient state synchronization
- **bitECS** - Entity Component System for game logic

### Frontend (Single Web Client)

- **Phaser 3** - Game rendering engine for 2D graphics
- **React 18** - UI framework for menus, HUD, and Discord integration
- **Tailwind CSS** - Styling that matches Discord's design language
- **Vite** - Modern build tool with fast HMR
- **@discord/embedded-app-sdk** - Official Discord integration
- **colyseus.js** - Client-side multiplayer connection
- **Zustand** - State management for UI components

### Data & Storage

- **OSRS Wiki API** - Authentic game data source
- **JSON Files** - Local game data storage
- **Express APIs** - Data access layer
- **PostgreSQL** - Player data persistence (future)
- **Redis** - Session management and caching (future)

### Infrastructure

- **pnpm workspaces** - Monorepo management
- **Jest** - Testing framework
- **Docker** - Containerization (production)
- **GitHub Actions** - CI/CD pipeline

## Project Structure

```
runerogue/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ osrs-data/          # OSRS formulas and data API âœ…
â”‚   â”œâ”€â”€ game-server/        # Colyseus multiplayer server âœ…
â”‚   â”œâ”€â”€ server/             # Main Express server âœ…
â”‚   â”œâ”€â”€ phaser-client/      # Web-based game client âŒ (needs refactor)
â”‚   â””â”€â”€ shared/             # Shared types and utilities âœ…
â”œâ”€â”€ scripts/                # Build and utility scripts
â”œâ”€â”€ docs/                   # Documentation and reports
â””â”€â”€ .github/
    â”œâ”€â”€ workflows/          # CI/CD pipelines
    â””â”€â”€ instructions/       # Development guidelines
```

## Development Phases

### âœ… Phase 0: Foundation (COMPLETE)

- OSRS data pipeline with combat formulas and Express API
- Colyseus multiplayer server infrastructure with basic rooms
- Shared types and utilities package
- Test framework setup (Jest) with mixed coverage

### ðŸŽ¯ Phase 1: Discord Activity Prototype (CURRENT - Week 1-3)

**Goal**: Create a working Discord Activity with basic multiplayer functionality

**Status**: 
- âŒ Discord Activity infrastructure not started
- âŒ Client needs complete refactor from legacy code
- âŒ No client-server connection implemented
- âš ï¸ Test coverage needs improvement (27/106 passing)

#### Phase 1 Checklist:

##### Week 1: Discord Setup & Client Foundation
- [ ] Create Discord application and configure settings
- [ ] Set up HTTPS certificates with mkcert
- [ ] Install all required dependencies
- [ ] Create Discord Activity manifest
- [ ] Implement Discord SDK initialization
- [ ] Set up React + Phaser hybrid architecture
- [ ] Configure Vite with HTTPS support

##### Week 2: Multiplayer Integration
- [ ] Implement NetworkManager for Colyseus
- [ ] Create state synchronization handlers
- [ ] Build connection status UI
- [ ] Add reconnection logic
- [ ] Test client-server communication
- [ ] Implement basic latency compensation

##### Week 3: Core Gameplay
- [ ] Player movement (WASD/arrows)
- [ ] Basic combat with OSRS formulas
- [ ] Health bars and UI elements
- [ ] Simple enemy spawning
- [ ] Collision detection
- [ ] Basic animations

### ðŸš€ Phase 2: Core Systems (PLANNED - Week 4-6)

- Full OSRS skill system implementation
- Equipment and inventory management
- Advanced combat mechanics with prayers
- Wave-based enemy spawning
- Player progression and XP tracking

### ðŸ“ˆ Phase 3: Polish & Launch (PLANNED - Week 7-8)

- Performance optimization for 60fps
- Advanced enemy AI and boss fights
- Social features and voice integration
- Discord Rich Presence
- Public release on Discord App Directory

## Key Principles

...existing code...

## Current Status Dashboard

### Package Status
| Package | Status | Tests | Coverage | Notes |
|---------|--------|-------|----------|-------|
| osrs-data | âœ… Complete | âœ… Passing | Good | Combat formulas implemented |
| game-server | âœ… Complete | âœ… Passing | Good | Basic rooms ready |
| server | âœ… Complete | âš ï¸ Mixed | Fair | Needs Discord routes |
| phaser-client | âŒ Legacy | âŒ Failing | Poor | Complete refactor needed |
| shared | âœ… Complete | âœ… Passing | Good | Types defined |

### Critical Path Items (Phase 1)
1. **Discord Application Setup** - Blocking everything else
2. **HTTPS Certificates** - Required for Discord Activities
3. **Client Refactor** - Legacy code won't work with Discord
4. **WebSocket Connection** - No multiplayer without this
5. **Basic Gameplay** - MVP for testing

## Quick Start Guide

### Prerequisites Check
```bash
# Check Node.js version (need 18+)
node --version

# Check pnpm installation
pnpm --version || npm install -g pnpm

# Check mkcert installation
mkcert --version || echo "Install mkcert first!"
```

### Day 1: Discord & Environment Setup

1. **Create Discord Application**
   ```
   1. Visit https://discord.com/developers/applications
   2. Create new application "RuneRogue"
   3. Save Application ID and Public Key
   4. Navigate to OAuth2 > General
   5. Add redirect URL: https://localhost:3000/auth/discord/callback
   6. Generate and save Client Secret
   7. Go to Bot section, create bot, save token
   8. In App Settings > App Testers, add your Discord ID
   ```

2. **Generate HTTPS Certificates**
   ```bash
   # Install mkcert if needed
   # Windows: choco install mkcert
   # macOS: brew install mkcert
   # Linux: Download from GitHub releases

   # Install root certificate
   mkcert -install

   # Generate certificates
   cd packages/phaser-client
   mkcert -key-file key.pem -cert-file cert

---

